<img src="etc/banner.png">

[![](https://zenodo.org/badge/117367205.svg)](https://zenodo.org/record/1146890#.WlpxPZM-f9s)

# APE = Awk Plus Extensions

APE is  pre-processor to awk that handles:

- structs, with field accessed via a nested dot syntax;
- auto initialization of nested structures
- unit tests
- multi-line comments containing markdown
- tests for for rogue locals

## INSTALLATION

Download [`ape`](src/ape). Place in the same
directory as your `*.ape` files. Then

     chmod +x ape

## TESTING

     ./ape ok apeok

## COMMANDS

- `./ape twins xxx`  
    - Creates two source code files `xxx.ape` and `xxxok.ape`.
    - `xxx.ape` loads `ape0.ape`
    - `xxxok.ape` load `xxx.ape` and runs unit tests. 
- `./ape run xxx`
    - runs the  file `xxx.ape`
- `./ape ok xxx`
    - runs the  file `xxxok.ape`, reports pass, fails
- `./ape ok `
    - runs all  the `*ok.ape` files, reports pass, fails

## FILES

### System Files

- `ape`     = the main routines
- `ape0.ape` = core functionality (structs and unit tests)
  This file is auto-generated by `ape` if
   it does not exist.

### Files 

- `xxx.ape` = your code
- `xxxok.ape` = test scripts for `xxx.ape`

### DIRECTORIES

- `./` = where to find  `.ape` source files; 
- `$Var` = where to store long-lived temoraries. Defaults to `$Src/var`;
  If `$Var` is in some version-controlled directory
  (e.g. git) best to exclude $Var from the files under version control
  (e.g. by adding the $Var pathname to `.gitingore`);
- `$Lib` = where to store generated `.awk` files;
- `$Doc` = where to store generated `.md` files.

If `$Var, $Lib, $Doc`  do not exist, they  are auto-generated by `ape`.


